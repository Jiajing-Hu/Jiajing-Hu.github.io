---
title: 交换两个值
date: 2018-11-25 03:00:04
tags: 
categories: 编程小技巧
---

刚学编程的时候，老师就曾经在c语言课上教过大家交换两个数字的值

当时是利用了一个中间值的方法，代码如下所示

```c 
void swap (int &a ,int &b)
{
	int temp = a;		//中间值
	a = b;
	b = temp;
}
```

这样便很轻松地交换了a和b的值

后来在找工作面试的时候，又遇到了一个问题*如何不使用中间值交换两个数的值*

这个问题比之前的问题稍微增加了一点难度，要求不能使用中间值，不过难度也并不高。

我们可以利用数学的原理来交换两个值。

> 假设 a = x, b = y
> 
> 那么我们可以令 a = a + b = x + y
> 
> 然后令 b = a - b = x + y - y = x
> 
> 最后令 a = a - b = x + y - x = y
> 
> 那么经过这些操作得到的结果为 a = y ,b = x

代码如下
```c++
void swap (int &a,int &b)
{
	a = a + b;
	b = a - b;
	a = a - b;
}
```

那么，这个是否还有其他的方法，更简洁的方法交换两个数字的值呢？

答案是有的。

先看代码

```c++
void swap (int &a,int &b)
{
	a ^= b ^= a ^= b;
}
```
这样一行代码就可以交换两个数字的值了，十分简洁和申请

这里的思路是利用了异或运算

> 异或 
> 异或也叫半加运算，其运算法则相当于不带进位的二进制加法：二进制下用1表示真，0表示假，则异或的运算法则为：0⊕0=0，1⊕0=1，0⊕1=1，1⊕1=0（同为0，异为1）
>

对于异或运算是满足交换律的，也就是说

> a ^ b ^ c = a ^ c ^ b

同时，一个数异或零等于本身，一个数异或本身等于0
> a ^ a = 0
> a ^ 0 = a

这种交换两个数字的方法正式利用了异或运算的交换律

> 我们令a = x,b = y
> 
> 根据C/C++语法，a ^= b ^= a ^= b这一行代码我们应该从右向左依次运算
>
> 我们可以将其拆分为
>  ```c++ 
> 	a = a ^ b;
> 	b = b ^ a;
> 	a = a ^ b;
>  ```
> 
> 首先计算a = a ^ b  ---> a = x ^ y 
> 
> 然后计算b = b ^ a --->  b = b ^ x ^ y  = y ^ x ^ y = y ^ y ^ x = x
>
> 最后计算 a = a ^ b = x ^ y ^ x = y

这样便达到了交换a，b的作用

仅仅使用了一行代码，还是十分简洁的
